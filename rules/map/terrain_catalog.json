{
  "terrain_catalog": {
    "version": "1.1",
    "last_updated": "2026-02-05",
    "notes": [
      "Catalog defines WHAT terrain is and what it can do.",
      "Rules app defines HOW hooks (high_ground, fall_risk, etc.) behave mechanically."
    ],

    "enums": {
      "category": ["building", "natural", "scatter", "industrial", "ruins", "water", "hazard", "roads"],
      "footprint_shape": ["circle", "rect", "oval", "poly", "line"],
      "cover_type": ["none", "light", "heavy"],
      "los_behavior": ["open", "obscures", "blocks"],
      "passability": ["open", "difficult", "impassable"],
      "elevation_system": ["none", "levels", "heightband"],
      "access_type": ["stairs", "ladder", "climb", "ramp", "jump", "elevator", "teleport"],
      "slot_tag": [
        "objective_anchor",
        "searchable",
        "lootable",
        "interior",
        "roof",
        "high_point",
        "cover_node",
        "ritual_site",
        "spawn_point",
        "extraction_point"
      ]
    },

    "terrain_type": {
      "terrain_type_id": "string (unique)",
      "name": "string",
      "category": "enum(category)",
      "tags": ["string"],
      "size_class": "string (e.g., S/M/L/XL)",

      "footprint": {
        "shape": "enum(footprint_shape)",
        "width": "number (inches, optional if not rect)",
        "height": "number (inches, optional if not rect)",
        "radius": "number (inches, optional if circle)",
        "points": "array of [x,y] (optional if poly)",
        "base_required": "boolean",
        "base_notes": "string (optional)"
      },

      "visibility": {
        "default_los": "enum(los_behavior)",
        "blocks_behind": "boolean (optional)",
        "windows_or_gaps": "boolean (optional)",
        "notes": "string (optional)"
      },

      "movement": {
        "default_passability": "enum(passability)",
        "climbable": "boolean",
        "jumpable": "boolean",
        "hazardous": "boolean",
        "notes": "string (optional)"
      },

      "cover": {
        "default_cover": "enum(cover_type)",
        "within_inches": "number (optional, default 1)",
        "directional": "boolean (optional)",
        "notes": "string (optional)"
      },

      "elevation": {
        "system": "enum(elevation_system)",
        "max_level": "integer (required if system=levels)",
        "level_height_inches": "number (optional, informational)",
        "levels": [
          {
            "level": "integer (0..max_level)",
            "label": "string",
            "los": {
              "behavior": "enum(los_behavior) (optional override)",
              "notes": "string (optional)"
            },
            "movement": {
              "passability": "enum(passability) (optional override)",
              "treat_as": ["enum(passability) or tags like 'difficult'"],
              "notes": "string (optional)"
            },
            "cover": {
              "type": "enum(cover_type) (optional override)",
              "within_inches": "number (optional)",
              "notes": "string (optional)"
            },

            "limits": {
              "max_models": "integer (optional)",
              "max_base_mm": "integer (optional, e.g., 40)",
              "notes": "string (optional)"
            },

            "slots": [
              {
                "slot_id": "string (unique within terrain_type)",
                "slot_tags": ["enum(slot_tag) or string"],
                "max_markers": "integer (optional)",
                "max_models": "integer (optional)",
                "notes": "string (optional)"
              }
            ],

            "rules_hooks": {
              "high_ground": { "enabled": "boolean", "note": "string (optional)" },
              "fall_risk": { "enabled": "boolean", "note": "string (optional)" },
              "interior": { "enabled": "boolean", "note": "string (optional)" }
            }
          }
        ],

        "access": [
          {
            "type": "enum(access_type)",
            "from_level": "integer",
            "to_level": "integer",
            "cost": "number (actions or movement units; your rules decide)",
            "requires_tag": "string (optional, e.g., 'climbable')",
            "test": {
              "required": "boolean",
              "test_type": "string (e.g., quality, stamina)",
              "dc": "integer (optional)",
              "on_fail": "string (optional)"
            },
            "notes": "string (optional)"
          }
        ]
      },

      "markers": {
        "supports_objectives": "boolean",
        "default_marker_types": ["string"],
        "notes": "string (optional)"
      },

      "spawn": {
        "is_spawn_point": "boolean",
        "spawn_tags": ["string"],
        "notes": "string (optional)"
      },

      "hazards": [
        {
          "hazard_id": "string",
          "label": "string",
          "rules_hook": "string",
          "severity": "integer (optional)",
          "notes": "string (optional)"
        }
      ],

      "art": {
        "icon": "string (optional)",
        "silhouette": "string (optional)",
        "gallery": ["string (optional URLs/paths)"]
      }
    }
  }
}
