/* ================================================================
   COFFIN CANYON MAP - ULTIMATE DESIGN
   ================================================================ */

:root {
  --frame-width: 1000px; 
  --frame-ratio: 1.5;   
  --lens-w: 635px;      /* Expanded to fill iron frame */
  --lens-h: 435px;      
  --cc-map-border: #4a3728;
  --warp-scale: 1.25;   /* Initial magnification scale */
}

/* === OUTER CONTAINER (The UI Bordered Box) === */
.cc-cm-mapwrap {
  position: relative !important;
  width: 100%;
  height: 85vh !important;
  min-height: 750px !important;
  overflow: hidden !important;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #000;
  
  /* Coffin Canyon UI Box Style */
  border: 10px solid var(--cc-map-border);
  border-radius: 12px;
  box-shadow: inset 0 0 60px #000, 0 10px 30px rgba(0,0,0,0.8);
}

/* === BACKGROUND MAP (Massive & Blurry) === */
#cc-cm-map {
  position: absolute !important;
  width: 3500px !important; /* Forces overflow of the box */
  height: 2500px !important;
  z-index: 1 !important;
  opacity: 0.4;
  filter: blur(6px) sepia(0.3);
  pointer-events: none;
}

/* === THE LENS (Masked high-res view) === */
.cc-lens {
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: var(--lens-w) !important;
  height: var(--lens-h) !important;
  z-index: 30 !important; /* Behind frame */
  overflow: hidden !important; /* This is the MASK */
  border-radius: 40px; 
}

.cc-lens-map {
  position: absolute;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  /* Applying the SVG Warp and CSS Scale */
  filter: url(#ccLensWarp) contrast(1.2) !important;
  transform: scale(var(--warp-scale)) !important;
}

/* === THE BRASS FRAME OVERLAY === */
.cc-frame-overlay {
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: var(--frame-width) !important;
  height: calc(var(--frame-width) / var(--frame-ratio)) !important;
  z-index: 35 !important; /* Over the lens */
  background-image: url('https://raw.githubusercontent.com/steamcrow/coffin/main/rules/apps/canyon_map/data/mag_frame.png') !important;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  pointer-events: none !important;
}

/* === THE BLAPPO KNOB (Larger & Shifted Left) === */
.cc-scroll {
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  margin-left: 343px !important; /* Shifted left to hit the groove */
  transform: translateY(-50%) !important;
  height: 440px !important; 
  width: 80px !important;
  z-index: 50 !important;
  pointer-events: auto !important;
}

.cc-scroll-knob {
  position: absolute !important;
  left: 50% !important;
  width: 80px !important;  /* Enlarged */
  height: 140px !important; /* Enlarged */
  transform: translate(-50%, -50%) !important;
  background-image: url('https://raw.githubusercontent.com/steamcrow/coffin/main/rules/apps/canyon_map/data/blappo_knob.png') !important;
  background-size: contain;
  background-repeat: no-repeat;
  cursor: grab !important;
  filter: drop-shadow(0 10px 15px rgba(0,0,0,0.8));
}
