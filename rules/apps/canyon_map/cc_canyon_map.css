/* === Magnifying Lens + Scroll Knob (Canyon Map only) === */

.cc-cm-body--lens .cc-cm-mapwrap{
  position: relative;
  overflow: hidden;
}

.cc-lens-svg { position: absolute; left: -9999px; top: -9999px; }

/* Fixed center lens */
.cc-lens{
  --lens-w: 520px;
  --lens-h: 360px;
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--lens-w);
  height: var(--lens-h);
  transform: translate(-50%, -50%);
  border-radius: 18px;
  z-index: 30;
  pointer-events: none; /* clicks go through to regions */
}

/* Rim */
.cc-lens-rim{
  position: absolute;
  inset: 0;
  border-radius: 18px;
  border: 2px solid rgba(255,255,255,0.32);
  box-shadow:
    0 10px 40px rgba(0,0,0,0.35),
    inset 0 0 0 1px rgba(0,0,0,0.35);
}

/* The warped glass content */
.cc-lens-inner{
  position: absolute;
  inset: 8px;
  border-radius: 14px;
  overflow: hidden;
  filter: url(#ccLensWarp);
}

/* Leaflet inside lens */
.cc-lens-map{
  position: absolute;
  inset: 0;
}

/* Subtle glare */
.cc-lens-glare{
  position: absolute;
  inset: 0;
  border-radius: 18px;
  background: radial-gradient(circle at 30% 25%, rgba(255,255,255,0.20), rgba(255,255,255,0.00) 55%);
  mix-blend-mode: screen;
  opacity: 0.55;
}

/* Vertical scroll knob */
.cc-scroll{
  position: absolute;
  right: 10px;
  top: 64px;
  bottom: 14px;
  width: 36px;
  z-index: 40;
  pointer-events: auto;
}

.cc-scroll-track{
  position: absolute;
  inset: 0;
  border-radius: 18px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.12);
}

.cc-scroll-knob{
  position: absolute;
  left: 50%;
  top: 50%;
  width: 26px;
  height: 56px;
  border-radius: 14px;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.22);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
  cursor: grab;
  touch-action: none;
}

.cc-scroll-knob:active{
  cursor: grabbing;
}

/* Critical: Leaflet needs a real height */
.cc-cm-mapwrap {
  position: relative;
  width: 100%;
  height: 70vh;
  min-height: 650px;
}

#cc-cm-map {
  position: absolute;
  inset: 0;
}

/* Make lens visible above the map */
.cc-lens,
.cc-scroll {
  position: absolute;
  z-index: 5;
}


/* Responsive lens */
@media (max-width: 980px){
  .cc-lens{
    width: min(86vw, 520px);
    height: min(42vh, 360px);
  }
  .cc-scroll{
    right: 6px;
    width: 32px;
  }
  .cc-scroll-knob{
    width: 24px;
    height: 52px;
  }
}
